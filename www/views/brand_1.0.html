<!DOCTYPE html>
<html lang="en">

<head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <title>Brand Flask</title>
 <link type="text/css" rel="stylesheet" href="/css/reset.css">
 <link type="text/css" rel="stylesheet" href="/css/brandflask.css">
 <link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Slab:100,300,700"> 
 <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
 <script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
</head>
<body>
    <div id="fb-root"></div>
	<header>
		<div id="header-nav">
            <nav>
             <ul>						
              <li><a href="/"><img id="nav-logo" src="/img/flask.png"></a></li>
              <li><a href="/" id="nav_top50">Top50</a></li>
              <li><a href="/" id="nav_luxury">Luxury</a>
               <ul>							  
                <div class="nav-container-wrap">
                    <div class="nav-pointer"></div>
                    <div class="nav-container">
                     <div class="nav-container-left">
                      <h2>Luxury brand</h2>
                      <p>TOP 5</p>
                      <a href="#">
                       <li>
                        <div class="nav-container-left-detail">
                            <span class="nav-container-left-detail-rank">1</span>
                            <span class="nav-container-left-detail-name">paul smith</span>
                            <div class="chart-item-rankchange-icon-up nav-container-rankchange-icon" ></div>
                            <span class="nav-container-left-detail-rankchange"> 4</span>
                        </div>
                    </li>
                </a>
                <a href="#">
                   <li>
                    <div class="nav-container-left-detail">
                        <span class="nav-container-left-detail-rank">2</span>
                        <span class="nav-container-left-detail-name">Mother Denim</span>
                        <div class="chart-item-rankchange-icon-up nav-container-rankchange-icon" ></div>
                        <span class="nav-container-left-detail-rankchange"> 5</span>
                    </div>
                </li>
            </a>
            <a href="#">
               <li>
                <div class="nav-container-left-detail">
                    <span class="nav-container-left-detail-rank">3</span>
                    <span class="nav-container-left-detail-name">paul smith</span>
                    <div class="chart-item-rankchange-icon-down nav-container-rankchange-icon" ></div>
                    <span class="nav-container-left-detail-rankchange"> 1</span>
                </div>
            </li>
        </a>
        <a href="#">
           <li>
            <div class="nav-container-left-detail">
                <span class="nav-container-left-detail-rank">4</span>
                <span class="nav-container-left-detail-name">paul smith</span>
                <div class="chart-item-rankchange-icon-down nav-container-rankchange-icon" ></div>
                <span class="nav-container-left-detail-rankchange"> 1</span>
            </div>
        </li>
    </a>
    <a href="#">
       <li>
        <div class="nav-container-left-detail nav-container-left-detail-last">
            <span class="nav-container-left-detail-rank">5</span>
            <span class="nav-container-left-detail-name">paul smith</span>
            <div class="chart-item-rankchange-icon-up nav-container-rankchange-icon" ></div>
            <span class="nav-container-left-detail-rankchange"> 102</span>
        </div>
    </li>
</a>
</div>
<div class="nav-container-right">
  <p>NEW BRANDS</p>
  <li><img src="/img/list-sample5.jpg"></li>
  <li><img src="/img/list-sample6.jpg"></li>
</div>	
</div>
</div>	
</ul>
</li>	
<li><a href="/" id="nav_casual">Casual</a>
   <ul>							  
    <div class="nav-container-wrap">
        <div class="nav-pointer"></div>
        <div class="nav-container">
         <div class="nav-container-left">
          <h2>Casual brand</h2>
          <p>Top 5</p>
          <a href="#">
           <li>
            <div class="nav-container-left-detail">
                <span class="nav-container-left-detail-rank">1</span>
                <span class="nav-container-left-detail-name">paul smith</span>
                <div class="chart-item-rankchange-icon-up nav-container-rankchange-icon" ></div>
                <span class="nav-container-left-detail-rankchange"> 4</span>
            </div>
        </li>
    </a>
    <a href="#">
       <li>
        <div class="nav-container-left-detail">
            <span class="nav-container-left-detail-rank">2</span>
            <span class="nav-container-left-detail-name">Mother Denim</span>
            <div class="chart-item-rankchange-icon-up nav-container-rankchange-icon" ></div>
            <span class="nav-container-left-detail-rankchange"> 15</span>
        </div>
    </li>
</a>
<a href="#">
   <li>
    <div class="nav-container-left-detail">
        <span class="nav-container-left-detail-rank">3</span>
        <span class="nav-container-left-detail-name">paul smith</span>
        <div class="chart-item-rankchange-icon-down nav-container-rankchange-icon" ></div>
        <span class="nav-container-left-detail-rankchange"> 1</span>
    </div>
</li>
</a>
<a href="#">
   <li>
    <div class="nav-container-left-detail">
        <span class="nav-container-left-detail-rank">4</span>
        <span class="nav-container-left-detail-name">paul smith</span>
        <div class="chart-item-rankchange-icon-down nav-container-rankchange-icon" ></div>
        <span class="nav-container-left-detail-rankchange"> 2</span>
    </div>
</li>
</a>
<a href="#">
   <li>
    <div class="nav-container-left-detail nav-container-left-detail-last">
        <span class="nav-container-left-detail-rank">5</span>
        <span class="nav-container-left-detail-name">paul smith</span>
        <div class="chart-item-rankchange-icon-up nav-container-rankchange-icon" ></div>
        <span class="nav-container-left-detail-rankchange"> 19</span>
    </div>
</li>
</a>
</div>
<div class="nav-container-right">
  <p>New Brands</p>
  <li><img src="/img/list-sample3.jpg"></li>
  <li><img src="/img/list-sample2.jpg"></li>
</div>	
</div>
</div>	
</ul>
</li>	

<li><a href="/" id="nav_mbs">Multi Brand Shop</a></li>
<li><a href="/" id="nav_boutique">Boutique</a></li>
</ul>
</nav>
</div>
</header>
<div id="container">
    <div id="main">
    	<div class="breadcrumb clearfix">
    		<ul id="brand-tags">
    		</ul>
    	</div>
        <div id="content-1">
            <div class="brand-info">
            	<div class="brand-info-name"></div>
            	<h3><span class="brand-info-calendar" id="date"></span>in <span class="brand-category" id="bc"></span></h3>
            	<div class="brand-info-rank"></div>
              <div class="brand-info-chart-item-rankchange-icon-up" id="chart-item-rankchange-icon"></div>
            	<span class="brand-info-rankchange-index"><p></p></span>
            	<h3>Most popular city</h3>
              <span class="brand-info-popular-city">New York</span>
              <h3>Most popular age group</h3>
              <span class="brand-info-popular-age">25-35</span>
          </div>

          <div class="similar-brands">
            <h3>Following Brands</h3>
            <ul class="clearfix">
              <a href="#"><li><img class="profile-img" src="/img/profile-5.jpg">
               <span class="similar-brand-rank"><p>33</p></span>
               <div class="chart-item-rankchange-icon-up similar-brand-rankchange-icon-up"></div>
               <span class="similar-brand-rankchange-index"><p>183</p></span>
               <span class="similar-brand-name"><p>T.L</p></span>
           </li></a>

           <a href="#"><li><img class="profile-img" src="/img/profile-3.jpg">
               <span class="similar-brand-rank"><p>34</p></span>
               <div class="chart-item-rankchange-icon-down similar-brand-rankchange-icon-up"></div>
               <span class="similar-brand-rankchange-index"><p>4</p></span>
               <span class="similar-brand-name"><p>Eva France</p></span>
           </li></a>

           <a href="#"><li><img class="profile-img" src="/img/profile-4.jpg">
               <span class="similar-brand-rank"><p>35</p></span>
               <div class="chart-item-rankchange-icon-up similar-brand-rankchange-icon-up"></div>
               <span class="similar-brand-rankchange-index"><p>84</p></span>
               <span class="similar-brand-name"><p>Derek Lam</p></span>
           </li></a>
           <a href="#"><li><img class="profile-img" src="/img/profile-1.jpg">
               <span class="similar-brand-rank"><p>36</p></span>
               <div class="chart-item-rankchange-icon-up similar-brand-rankchange-icon-up"></div>
               <span class="similar-brand-rankchange-index"><p>3</p></span>
               <span class="similar-brand-name"><p>Sashia</p></span>
           </li></a>
       </ul>
   </div>

   <div id="sticker" class="brand-store">
     <p>Where to Shop this brand</p>
     <ul class=brand-store-button>
      <li><a href="#"><div class="shop-button">Gilt</li>
      <li><a href="#"><div class="shop-button">Shopbop</div></a></li>
      <li><a href="#"><div class="shop-button">Loui Vuitton</div></a></li>
  </ul>
</div>
</div>
</div>
<div id="content-2-brand-wrap">
<div id="content-2">
</div>
</div>
<div id="content-2-1">
 <ul>
</ul>	
</div>
<div id="content-2-2">
 <ul>
  <li><div class="content-2-2-detail">
   <img src="/img/paris3.jpg">
   <p>Paris </br>Since 1894</p>
</div>
</li>            	
<li><div class="content-2-2-logo-wrap"><span class="content-2-2-logo" ><img src="/img/profile-6.jpg"></span></div></li>
<li><div class="content-2-2-detail"><img src="/img/lv6.jpg"><p>Famous Fan </br>Louise Bougoin</p></div></li>
<li><img src="/img/lv7.jpg"></li>
<li><div class="content-2-2-detail"><img src="/img/lv8.jpg"><p>Famous Fan </br>Miranda Kerr</p></div></li>
<li><img src="/img/lv10.jpg"></li>
<li><img src="/img/lv1.jpg"></li>
<li><img src="/img/lv11.jpg"></li>
<li><img src="/img/lv13.jpg"></li>
</ul>
</div>
</div>
</div>
</div>

<div id="brand-share-wrap">
	<a href="#"><div class="brand-share brand-share-fb"></div></a>
	<a href="#"><div class="brand-share brand-share-tw"></div></a>
	<a href="#"><div class="brand-share brand-share-pinterest"></div></a>
</div>

<div id="footer">
 <div id="footer-nav">
  <div class="footer-nav-col1">
   <h2>More Info</h2>
   <ul>
    <li><a href="about.html">About Us</a></li>
</ul>
</div>
<div class="footer-nav-col2">
   <h2>2014 Rising Stores</h2>
   <ul>
    <a href="#"><li>Scoop NYC</li></a>
    <a href="#"><li>Revolve Clothing</li></a>
    <a href="#"><li>Topshop</li></a>
    <a href="#"><li>Yoox</li></a>
</ul>
</div>	
<div class="footer-nav-col3">
   <h2>Popular Stores</h2>
   <ul>
     <a href="#"><li>Gilt</li></a>
     <a href="#"><li>Shopbop</li></a>
     <a href="#"><li>Neiman Marcus</li></a>
     <a href="#"><li>Net-a-Porter</li></a>
 </ul>
</div>	
<div class="footer-nav-col4">
   <h2>Connect with Us</h2>
   <ul>
    <li><a class="footer-facebook" href="www.facebook.com/brandflask"><p>Facebook</p></a></li>
    <li><a class="footer-twitter" href="www.twitter.com/brandflask"><p>Twitter</p></a></li>
    <li><a class="footer-tumblr" href="www.tumblr.com/brandflask"><p>Tumblr</p></a></li>
</ul>
</div>	
</div>
</div>

<script src="/js/jquery.sticky.js"></script>
<script type="text/javascript">

$( document ).ready(function() {

  var obj_array = new Array();
  {% for obj in srclist %}
    obj_array.push('{{ obj.objid }}');
  {% endfor %}

  $.ajaxSetup({ cache: true });
	
	$(window).scroll(function() {     
     var scroll = $(window).scrollTop();
     if (scroll > 0) {
         $("header").addClass("active");
     }
     else {
         $("header").removeClass("active");
     }
  });
	
  $("#sticker").sticky({topSpacing:70});
  
// disable pull down menu
  $( "div.nav-container-wrap").hide();

  var api = new String('/api/v1/stat/{{brand_id}}');
  $.getJSON(api, function() {
      console.log ("Done");
  }).done(function(data) {
    $.getScript('//connect.facebook.net/en_UK/all.js', function(){
      FB.init({
        appId: '1380374468852725',
      });     
      $('#loginbutton,#feedbutton').removeAttr('disabled');
      FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
          console.log('Logged in.');
          /* make the API call */
          obj_array.forEach(function(id) {
            var fbApi = "/"+ id;
              FB.api(
                fbApi,
                function (response) {
                  if (response && !response.error) {
                    /* handle the result */
                    //console.log(response.source);
                  
                    var newItem = '<img src="' + response.source + '" style="max-width:90%"></li>'
                    $( "#content-2-1 ul" ).append(newItem);
                  } else {
                    console.log("fail to load photo");
                  }
                }
              ); 
          });
        }
        else {
          FB.login();
        } 
      });
    });
    $.each( data.RankUps, function( i, item ) {
        var tagList = item.TagList;
        var fmtlist = new String()
        for (var k in tagList)
        {
          if(k != 0) {
            fmtlist = fmtlist + '<li><a href="#">' + tagList[k] + '</a></li>';
          }
        }
        $( "div.brand-info-name" ).text(item.Brand.DisplayName);
        $( "#brand-tags").html(fmtlist);

        var d = new Date();
        n = d.getMonth();
        var month;
        console.log(d.getDay());
        switch(n) {
          case 0:
          month = "Jan ";
          break;
          case 1:
          month = "Feb ";
          break;
          case 2:
          month = "Mar ";
          break;
          case 3:
          month = "Apl ";
          break;
          case 4:
          month = "May ";
          break;
          case 5:
          month = "Jun ";
          break;
          case 6:
          month = "Jul ";
          break;
          case 7:
          month = "Aug ";
          break;
          case 8:
          month = "Sep ";
          break;
          case 9:
          month = "Oct ";
          break;
          case 10:
          month = "Nov ";
          break;
          case 11:
          month = "Dec ";
          break;
          default:
          month = "All ";
      }
      month = month + d.getDay() + " ";
      $( "#date" ).text(month);
      $( "#bc" ).text(item.TagList[0]);
      $( "div.brand-info-rank" ).text(item.Brand.Ranking);
      $( "span.brand-info-rankchange-index" ).html("<p>" + item.RankingChange + "</p>");
      if(item.Brand.RankingDelta > 0) {
        $( "#chart-item-rankchange-icon").html('<div class="chart-item-rankchange-icon-down"></div>');
      } else if(item.Brand.RankingDelta < 0) {
        $( "#chart-item-rankchange-icon").html('<div class="chart-item-rankchange-icon-up"></div>');
      } else {
        $( "#chart-item-rankchange-icon").html('<div class="chart-item-rankchange-icon-nochange"></div>');
      }
    });
  })
  .fail(function() {
    console.log( "error" );
  })
  .always(function() {
    console.log( "complete" );
  });
});
</script>

</body>
</html>
